<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VFS class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>VFS  Class Reference</h1>Trida vytvarejici virtualni filesystem. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="VFS_8h-source.html">VFS.h</a>&gt;</code>
<p>
<a href="classVFS-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a0">VFS</a> (const char *path, const char *db_name)  throw (VFSError, GdbmError, FileError)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Konstruktor tridy VFS.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a1">~VFS</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Destruktor tridy VFS.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a2">ReloadConfigFile</a> (const char *path)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Znovu nahraje konfiguracni soubor.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a3">ChangeDir</a> (const char *path)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Meni aktualni adresar.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a4" doxytag="VFS::CurrentDir"></a>
string&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a4">CurrentDir</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Vraci aktualni adresar - absolutni cestu ve virtualnim strome.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a5" doxytag="VFS::CurrentPhysicalDir"></a>
string&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a5">CurrentPhysicalDir</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Zjisti skutecny aktualni fyzicky adresar pomoci getcwd().</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a6">ConvertToPhysicalPath</a> (string virtual_path, string &amp;physical_path)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Prevede virtualni cestu na jeji fyzicky ekvivalent.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a7" doxytag="VFS::AllowedToWriteToDir"></a>
bool&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a7">AllowedToWriteToDir</a> (string dir)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Zjisti, zda uzivatel ftp_user_name smi zapisovat do adresare dir.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a8">ResetFiles</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Restartuje nacitani souboru pomoci <a class="el" href="classVFS.html#a9">NextFile</a>().</em> <a href="#a8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVFS__file.html">VFS_file</a> *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a9">NextFile</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Postupne vraci soubory a adresare v aktualnim adresari.</em> <a href="#a9">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a10">GetFileInfo</a> (const char *path, <a class="el" href="classVFS__file.html">VFS_file</a> &amp;x)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Zjisti informace o zadanem souboru.</em> <a href="#a10">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a11">PutFileInfo</a> (<a class="el" href="classVFS__file.html">VFS_file</a> file)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Funkce ukladajici informace o souboru file do databaze root_db.</em> <a href="#a11">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a12">DeleteFileInfo</a> (<a class="el" href="classVFS__file.html">VFS_file</a> file)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Funkce maze informace o souboru file z databaze root_db;.</em> <a href="#a12">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a16" doxytag="VFS::IsFile"></a>
bool&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a16">IsFile</a> (const char *path)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Zjisti zda file ukazuje na (pristupny) soubor.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a17">IsDir</a> (const char *path)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Zjisti zda dir ukazuje na adresar.</em> <a href="#a17">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#a20">PrintVirtualTree</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Vypise virtualni strom nasdilenych adresaru.</em> <a href="#a20">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c0">LoadConfigFile</a> (const char *path)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Nahrava konfiguracni soubor tridy VFS.</em> <a href="#c0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c1">SimpleCd</a> (const char *dir)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Pomocna funkce pro <a class="el" href="classVFS.html#a3">VFS::ChangeDir</a>.</em> <a href="#c1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c2">PreorderAction</a> (VFS_node *n, int action(VFS_node *node, int num), int depth)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Projde strom v pre-orderu.</em> <a href="#c2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c3">PostorderAction</a> (VFS_node *n, int action(VFS_node *node, int num), int depth)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Projde strom v post-orderu.</em> <a href="#c3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="c4" doxytag="VFS::_DirSecurityCheck"></a>
VFS_node *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c4">_DirSecurityCheck</a> (VFS_node *n, string dir)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Pomocna rekurzivni funkce pro DirSecurityCheck.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="c5" doxytag="VFS::_FindNode"></a>
VFS_node *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c5">_FindNode</a> (VFS_node *n, string name)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Pomocna rekurzivni funkce pro FindNode.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c6">DestroyVirtualTree</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Zrusi virtualni strom.</em> <a href="#c6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>VFS_node *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c7">DirSecurityCheck</a> (string dir)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Kontroluje, jestli lze prejit do adresare dir.</em> <a href="#c7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>VFS_node *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#c8">FindNode</a> (string name)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Hleda uzel s fyzickym jmenem (adresarem) name.</em> <a href="#c8">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="o0" doxytag="VFS::root_db"></a>
<a class="el" href="classDirectoryDatabase.html">DirectoryDatabase</a>&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#o0">root_db</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>fyzicky adresar databaze odpovida virtualnimu rootu.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="o1" doxytag="VFS::current_node"></a>
VFS_node *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#o1">current_node</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>v jakem uzlu virtualniho stromu prave jsme.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="o2" doxytag="VFS::root_node"></a>
VFS_node *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#o2">root_node</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>koren virtualniho stromu.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="o3" doxytag="VFS::dir_desc"></a>
DIR *&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#o3">dir_desc</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>stream pro aktualni adresar.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="o8" doxytag="VFS::current_dir"></a>
string&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#o8">current_dir</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>current_dir obsahuje fyzickou cestu k aktualnimu adresari Pokud ale jsme zrovna ve virtualnim uzlu s fyzickym adresarem, tak current_dir obsahuje ".", celou fyzickou cestu do aktualniho adresare obsahuje az kdyz sestoupime do nejakeho podadresare fyzickeho adresare soucasneho uzlu.</em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Friends</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="l0" doxytag="VFS::PrintName"></a>
int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#l0">PrintName</a> (VFS::VFS_node *node, int depth)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Pomocna funkce pro PrintVirtualName().</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="l1" doxytag="VFS::DeleteNode"></a>
int&nbsp;</td><td valign=bottom><a class="el" href="classVFS.html#l1">DeleteNode</a> (VFS::VFS_node *node, int)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Pomocna funkce pro <a class="el" href="classVFS.html#c6">DestroyVirtualTree</a>().</em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Umoznuje pod korenovy adresar pripojit mnozstvi virtualnich adresaru a kazdemu priradit nejaky fyzicky adresar (nebo take zadny). Tato struktura je popsana v konfiguracnim souboru VFS, ktery nacita konstruktor a jeho znovu nahrani umoznuje funkce <a class="el" href="classVFS.html#a2">ReloadConfigFile</a>(). Trida kontroluje pristupova prava uzivatele, podle udaju ulozenych v databazi, pomoci tridy <a class="el" href="classDirectoryDatabase.html">DirectoryDatabase</a>. Pokud napriklad nema uzivatel pravo na cteni urciteho adresare, vrati funkce <a class="el" href="classVFS.html#a3">ChangeDir</a>() chybu. Funkce <a class="el" href="classVFS.html#a3">ChangeDir</a>() dostava jako argument virtualni cestu a podle ni prepne aktualni adresar, popr. prislusne zmeni fyzicky adresar, je-li treba. Pritom kontroluje, za prve jestli cesta existuje, jestli k ni ma uzivatel dostatecna prava a zda nahodou nevede pres nejaky link mimo nasdilenou strukturu (nactenou z konfiguracniho souboru). Tj. pokud ma napriklad virtualni root "/" prirazeny fyzicky adresar /home/alice, pod nim je pripojeny virtualni adresar "/media" s fyzickym adresarem /mnt/windows/media a fyzicky na disku existuje adresar /home/alice/konf, ktery je linkem na fyzicky adresar /etc, pak ChangeDir("/konf") vrati chybu, protoze fyzicky adresar /etc neni v nasidene strukture. Kdezto, pokud existuje adresar /home/alice/filmy, ktery jako link odkazuje na fyzicky adresar /mnt/windows/media/filmy, prikaz ChangeDir("/filmy") vyhovi, protoze link vede do nasdilene struktury (do podadresare nasdileneho adresare /mnt/windows/media). Trida pracuje s pravy R_READ, R_WRITE, R_ALL a R_NONE, umoznuje i napriklad obdobu linuxovske cerne skrinky - tj. uzivatel ma k adresari pouze pravo R_WRITE, takze se do adresare nemuze prepnout nebo vypsat soubory v nem obsazene, ale muze do nej zapisovat (coz potvrdi funkce <a class="el" href="classVFS.html#a7">AllowedToWriteToDir</a>()). K souboru ci adresari lze urcit jeho vlastnika, prava vlastnika a pristupova prava ostatnich uzivatelu. Pokud o souboru jeste neni v databazi zaznam, vrati funkce <a class="el" href="classVFS.html#a10">GetFileInfo</a>() implicitne jako vlastnika NO_USER, jeho prava R_NONE a prava ostatnich jako R_READ, zaznam do databaze neuklada. Funkce <a class="el" href="classVFS.html#a9">NextFile</a>() a <a class="el" href="classVFS.html#a8">ResetFiles</a>() umoznuji postupny pruchod souboru a adresaru (jak virtualnich tak fyzickych) obsazenych v aktualnim adresari. Nasdilena struktura adresaru je se uchovava ve stromu tvorenem uzly VFS_node. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="VFS::VFS"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VFS </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>db_name</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throw (<a class="el" href="classVFSError.html">VFSError</a>, <a class="el" href="classGdbmError.html">GdbmError</a>, <a class="el" href="classFileError.html">FileError</a>)</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Nacte konfiguracni soubor - pokud se to nepovede, hodi vyjimku <a class="el" href="classVFSError.html">VFSError</a>, s hlavnim kodem chyby -1 a vedlejsi kod bude odpovidat cislu radky, na kterem se chyba vyskytla.
<p>
path = cesta ke konfiguracnimu souboru db_name = jmeno databaze pouzivane tridou <a class="el" href="classDirectoryDatabase.html">DirectoryDatabase</a> (obsahuje informace o pravech a uzivateli jednotlivych souboru)     </td>
  </tr>
</table>
<a name="a1" doxytag="VFS::~VFS"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ~VFS </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Zrusi virtualni strom.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="VFS::ChangeDir"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ChangeDir </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>path</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Pokud nelze vejit do noveho adresare, zustane na puvodnim miste.
<p>
Navratove hodnoty:
<p>
viz. <a class="el" href="classVFS.html#c1">VFS::SimpleCd</a>() +:
<p>
<ul>
<li>-6 cesta vede pres link mimo nasdilenou adresarovou strukturu </ul>
    </td>
  </tr>
</table>
<a name="a6" doxytag="VFS::ConvertToPhysicalPath"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ConvertToPhysicalPath </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>virtual_path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>string &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>physical_path</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Nekontroluje jakakoliv pristupova prava, ani pristupnost nebo existenci  adresare, pouze mechanicky prevede virtualni cestu na fyzickou.
<p>
Navratove hodnoty:
<p>
<ul>
<li>1 vse OK<li>-1 pri prevodu nastala chyba - cesta je syntakticky spatne (obsahuje dve lomitka za sebou, atp.) </ul>
    </td>
  </tr>
</table>
<a name="a12" doxytag="VFS::DeleteFileInfo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int DeleteFileInfo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classVFS__file.html">VFS_file</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>file</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Navratove hodntoty:
<p>
viz. <a class="el" href="classDirectoryDatabase.html#a4">DirectoryDatabase::DeleteFileInfo</a>()
<p>
<ul>
<li>1 vse OK<li>zaporna hodnota chyba </ul>
    </td>
  </tr>
</table>
<a name="c6" doxytag="VFS::DestroyVirtualTree"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int DestroyVirtualTree </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Pokud uspeje, vrati 1 a vynuluje root_node, jinak vrati -1 a s root_node nic nedela.     </td>
  </tr>
</table>
<a name="c7" doxytag="VFS::DirSecurityCheck"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VFS::VFS_node * DirSecurityCheck </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>dir</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Do adresare dir muzeme prejit, pokud ukazuje nekam do podstromu nasdilenych fyzickych adresaru - tj. fyzicky adresar nektereho z uzlu virtualniho stromu je predponou adresare dir. Pokud dir ukazuje na bezpecne misto, vrati funkce ukazatel na uzel, pod ktery adresar patri, jinak vraci 0.     </td>
  </tr>
</table>
<a name="c8" doxytag="VFS::FindNode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VFS::VFS_node * FindNode </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>name</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Pokud uzel najde, vrati odkaz na nej, pokud ho nenajde, vrati 0.     </td>
  </tr>
</table>
<a name="a10" doxytag="VFS::GetFileInfo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int GetFileInfo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classVFS__file.html">VFS_file</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>x</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Navratove hodnoty:
<p>
jako <a class="el" href="classVFS.html#a3">ChangeDir</a>() +
<p>
<ul>
<li>-7 neni to soubor </ul>
    </td>
  </tr>
</table>
<a name="a17" doxytag="VFS::IsDir"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool IsDir </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>dir</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Pokud dir ukazuje na nejaky adresar (cesta k nemu musi vest pres virtualni strom), tak odpovi true, jinak false.     </td>
  </tr>
</table>
<a name="c0" doxytag="VFS::LoadConfigFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int LoadConfigFile </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>name</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Kontrolujeme, jestli mame do adresare pristup. <a class="el" href="pomocne_8h.html">CheckDir</a>(), ktery pouzivame zaroven resolvne pripadne symbolicke linky v ceste a ulozi do physical_dir cestu ktera je neobsahuje - potrebujeme mit v uzlech ve fyzickem adresari resolvnutou cestu, protoze aktualni adresar pak zjistujeme pomoci getcwd a to vraci cestu bez linku i kdyz jsme se do adresare pres nejaky link dostali - s neresolvnutou cestou v uzlech  by nam pak selhaval <a class="el" href="classVFS.html#c7">DirSecurityCheck</a>(). V pripade uspechu vraci 1, jinak vrati zapornou hodnotu cisla radku, na kterem se vyskytla chyba.     </td>
  </tr>
</table>
<a name="a9" doxytag="VFS::NextFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVFS__file.html">VFS_file</a> * NextFile </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
V pripade chyby nebo vycerpani vsech podadresaru vrati 0. Po zavolani <a class="el" href="classVFS.html#a8">ResetFiles</a>() zacne <a class="el" href="classVFS.html#a9">NextFile</a>() vracet soubory a adresare od zacatku. Pokud je ignore_hidden == true, nebude vracet skryte soubory a adresare.     </td>
  </tr>
</table>
<a name="c3" doxytag="VFS::PostorderAction"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PostorderAction </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VFS_node *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int action(VFS_node *node, int num)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>depth</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Projde kazdy uzel stromu a pred jeho opustenim spusti funkci action, ktera dostane jako parametr ukazatel na aktualni uzel a hloubku uzlu ve strome.     </td>
  </tr>
</table>
<a name="c2" doxytag="VFS::PreorderAction"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PreorderAction </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VFS_node *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int action(VFS_node *node, int num)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>depth</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Projde kazdy uzel stromu a vzdy nejdrive spusti funkci action, ktera dostane jako parametr ukazatel na aktualni uzel a hloubku uzlu ve strome.     </td>
  </tr>
</table>
<a name="a20" doxytag="VFS::PrintVirtualTree"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PrintVirtualTree </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Funkce pro ucely ladeni.     </td>
  </tr>
</table>
<a name="a11" doxytag="VFS::PutFileInfo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int PutFileInfo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classVFS__file.html">VFS_file</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>file</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Navratove hodnoty:
<p>
viz. <a class="el" href="classDirectoryDatabase.html#a2">DirectoryDatabase::PutFileInfo</a>()
<p>
<ul>
<li>1 vse OK<li>zaporna hodnota chyba </ul>
    </td>
  </tr>
</table>
<a name="a2" doxytag="VFS::ReloadConfigFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ReloadConfigFile </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>path</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Kompletne prestavi virtualni strom podle novych informaci.
<p>
Navratove hodnoty:
<p>
<ul>
<li>1 vse OK<li>-1 chyba pri destrukci virtualniho stromu<li>-2 chyba pri nahravani konfiguracniho souboru </ul>
    </td>
  </tr>
</table>
<a name="a8" doxytag="VFS::ResetFiles"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ResetFiles </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Zavre adresar, pokud je otevreny, a vyprazdni buffer potomku - virtualnich podadresaru. Tim zpusobi, ze <a class="el" href="classVFS.html#a9">NextFile</a>() bude pri nasledujicich volanich vracet soubory (a adresare) od zacatku.     </td>
  </tr>
</table>
<a name="c1" doxytag="VFS::SimpleCd"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SimpleCd </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>dir</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Jako argument dostane jmeno adresare bez cesty, do nej se pokusi prepnout.
<p>
Navratove hodnoty:
<p>
<ul>
<li>1 vse v nejlepsim poradku :)<li>-2 nedostatecna prava<li>-3 neexistuje<li>-4 prilis dlouhe jmeno<li>-5 nelze jit vys, jsme v rootu<li>-1 jina chyba </ul>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="VFS_8h-source.html">VFS.h</a><li><a class="el" href="VFS_8cpp.html">VFS.cpp</a></ul>
<hr><address><small>Generated on Fri Sep 19 10:13:26 2003 for smallFTPd by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
